Project Voedselbank {
  database_type: "MySQL"
}

/* =========================
   AUTHENTICATIE & GEBRUIKERS
   ========================= */

Table users {
  id int [pk, increment]
  PersoonId int
  name varchar(255) [not null]
  email varchar(255) [not null, unique]
  email_verified_at timestamp
  password varchar(255) [not null]
  IsIngelogd bit(1) [default: 0]
  Ingelogd datetime
  Uitgelogd datetime
  remember_token varchar(100)
  created_at timestamp
  updated_at timestamp
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table Rol {
  Id int [pk, increment]
  Naam varchar(100) [not null]
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table RolPerGebruiker {
  Id int [pk, increment]
  GebruikerId int [not null]
  RolId int [not null]
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

/* =========================
   PERSONEN & GEZINNEN
   ========================= */

Table Persoon {
  Id int [pk, increment]
  GezinId int
  Voornaam varchar(255) [not null]
  Tussenvoegsel varchar(50)
  Achternaam varchar(255) [not null]
  Geboortedatum date
  TypePersoon varchar(50)
  IsVertegenwoordiger bit(1) [default: 0]
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table Gezin {
  Id int [pk, increment]
  Naam varchar(255) [not null]
  Code varchar(20)
  Omschrijving varchar(255)
  AantalVolwassenen int [default: 0]
  AantalKinderen int [default: 0]
  AantalBabys int [default: 0]
  TotaalAantalPersonen int [default: 0]
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

/* =========================
   CONTACT & ADRES
   ========================= */

Table Contact {
  Id int [pk, increment]
  Straat varchar(255) [not null]
  Huisnummer varchar(20) [not null]
  Toevoeging varchar(20)
  Postcode varchar(10) [not null]
  Woonplaats varchar(100) [not null]
  Email varchar(255)
  Mobiel varchar(20)
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table ContactPerGezin {
  Id int [pk, increment]
  GezinId int [not null]
  ContactId int [not null]
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

/* =========================
   EETWENSEN & ALLERGENEN
   ========================= */

Table Eetwens {
  Id int [pk, increment]
  Naam varchar(100) [not null]
  Omschrijving varchar(255)
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table EetwensPerGezin {
  Id int [pk, increment]
  GezinId int [not null]
  EetwensId int [not null]
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table Allergie {
  Id int [pk, increment]
  Naam varchar(100) [not null]
  Omschrijving varchar(255)
  AnafylactischRisico varchar(50)
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table AllergiePerPersoon {
  Id int [pk, increment]
  PersoonId int [not null]
  AllergieId int [not null]
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

/* =========================
   PRODUCTEN & CATEGORIEEN
   ========================= */

Table Categorie {
  Id int [pk, increment]
  Naam varchar(100) [not null]
  Omschrijving varchar(255)
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table Product {
  Id int [pk, increment]
  CategorieId int [not null]
  Naam varchar(255) [not null]
  SoortAllergie varchar(255)
  Barcode varchar(50)
  Houdbaarheidsdatum date
  Omschrijving varchar(255)
  Status varchar(50)
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

/* =========================
   LEVERANCIERS & MAGAZIJN
   ========================= */

Table Leverancier {
  Id int [pk, increment]
  Naam varchar(255) [not null]
  ContactPersoon varchar(255)
  LeverancierNummer varchar(50)
  LeverancierType varchar(50)
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table ContactPerLeverancier {
  Id int [pk, increment]
  LeverancierId int [not null]
  ContactId int [not null]
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table ProductPerLeverancier {
  Id int [pk, increment]
  LeverancierId int [not null]
  ProductId int [not null]
  DatumAangeleverd date
  DatumEerstVolgendeLevering date
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table Magazijn {
  Id int [pk, increment]
  Ontvangstdatum date
  Uitleveringsdatum date
  VerpakkingsEenheid varchar(50)
  Aantal int [default: 0]
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table ProductPerMagazijn {
  Id int [pk, increment]
  ProductId int [not null]
  MagazijnId int [not null]
  Locatie varchar(100)
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

/* =========================
   VOEDSELPAKKETTEN
   ========================= */

Table Voedselpakket {
  Id int [pk, increment]
  GezinId int [not null]
  PakketNummer int [not null]
  DatumSamenstelling datetime
  DatumUitgifte datetime
  Status varchar(50)
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

Table ProductPerVoedselpakket {
  Id int [pk, increment]
  VoedselpakketId int [not null]
  ProductId int [not null]
  AantalProductEenheden int [default: 0]
  IsActief bit(1) [default: 1]
  Opmerking varchar(255)
  DatumAangemaakt datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
  DatumGewijzigd datetime(6) [default: `CURRENT_TIMESTAMP(6)`]
}

/* =========================
   RELATIES
   ========================= */

// Users & Rollen
Ref: users.PersoonId > Persoon.Id
Ref: RolPerGebruiker.GebruikerId > users.id
Ref: RolPerGebruiker.RolId > Rol.Id

// Persoon & Gezin
Ref: Persoon.GezinId > Gezin.Id

// Contact relaties
Ref: ContactPerGezin.GezinId > Gezin.Id
Ref: ContactPerGezin.ContactId > Contact.Id
Ref: ContactPerLeverancier.LeverancierId > Leverancier.Id
Ref: ContactPerLeverancier.ContactId > Contact.Id

// Eetwens & Allergie
Ref: EetwensPerGezin.GezinId > Gezin.Id
Ref: EetwensPerGezin.EetwensId > Eetwens.Id
Ref: AllergiePerPersoon.PersoonId > Persoon.Id
Ref: AllergiePerPersoon.AllergieId > Allergie.Id

// Product relaties
Ref: Product.CategorieId > Categorie.Id

// Leverancier & Magazijn
Ref: ProductPerLeverancier.LeverancierId > Leverancier.Id
Ref: ProductPerLeverancier.ProductId > Product.Id
Ref: ProductPerMagazijn.ProductId > Product.Id
Ref: ProductPerMagazijn.MagazijnId > Magazijn.Id

// Voedselpakket
Ref: Voedselpakket.GezinId > Gezin.Id
Ref: ProductPerVoedselpakket.VoedselpakketId > Voedselpakket.Id
Ref: ProductPerVoedselpakket.ProductId > Product.Id
